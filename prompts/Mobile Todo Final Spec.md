📱 Todo App Mobile Day / Week 统一实现规范（最终整合版）

适用对象：Claude Code（工程实现）
设计来源：Pencil 中当前选中的 Frame
文档性质：增量实现规范（禁止重做）

⸻

0️⃣ 阅读指引（给 Claude Code）
	•	本文档整合了：
	•	早期 Mobile Day / Week V2 实现规范
	•	当前最新 Mobile Day View V3 / Mobile Week V3 设计稿
	•	若本文档与旧实现存在冲突，以本文档为准
	•	所有实现：
	•	仅限 当前 Pencil 选中的 Frame
	•	仅做 逻辑补齐 / 行为修正
	•	严禁 UI 重构、结构调整、交互再设计

⸻

1️⃣ 全局强制约束（最高优先级）

必须遵守
	1.	禁止重做 UI
	2.	禁止新增设计稿未出现的交互
	3.	禁止调整布局结构与层级关系
	4.	禁止自行合并 / 简化交互逻辑
	5.	只允许修改 Pencil 当前选中的 Frame

已存在的实现：只允许“修正 / 补齐”，不允许“替换方案”。

⸻

2️⃣ 全局交互哲学（Day / Week 通用）
	1.	一个动作 = 一个语义
	2.	状态切换 / 编辑 / 删除 必须完全解耦
	3.	移动端不使用 hover / 悬浮预览
	4.	轻操作在列表完成，重操作进 Bottom Sheet
	5.	所有状态变化路径必须唯一

⸻

3️⃣ 任务状态模型（统一）

状态枚举

待办 → 进行中 → 已完成 → 待办

状态切换规则
	•	点击任务主体区域 → 按顺序切换状态
	•	点击图标 / 弹窗操作 不得触发状态切换

禁止项
	•	编辑中切换状态
	•	删除前自动改状态
	•	多入口状态控制

⸻

4️⃣ Mobile Week View（周视图）实现规范

4.1 列表态行为
	•	点击任务 → 打开 Bottom Sheet
	•	周视图列表中：
	•	不直接切换状态
	•	不提供行内编辑按钮

4.2 周视图信息密度规则
	•	任务标题：单行显示 + 省略号
	•	不显示时间（时间仅在 Bottom Sheet 中）
	•	任务过多：
	•	使用 +N 汇总
	•	或展开箭头展开列表
	•	展开后：
	•	按 开始时间升序排列
	•	内容可滚动

4.3 Bottom Sheet（周视图）结构

自上而下：
	1.	任务标题（可编辑，完整显示）
	2.	当前状态（只读展示）
	3.	【状态切换按钮】
	4.	标签 / 优先级
	5.	日期
	6.	时间范围
	7.	删除按钮

4.4 周视图编辑规则
	•	点击标题文字 → 进入编辑
	•	失焦 / 关闭即保存
	•	不提供独立“编辑按钮”

⸻

5️⃣ Mobile Day View（日视图 V3 – Final）实现规范

5.1 行内结构

每条任务右侧必须包含：
	•	✏️ 编辑按钮
	•	🗑️ 删除按钮

5.2 点击语义划分

区域	行为
任务主体	状态切换
编辑按钮	编辑任务
删除按钮	删除确认

5.3 文本与布局
	•	标题：单行显示，允许更长
	•	超出使用省略号
	•	时间显示在标题下方

⸻

6️⃣ 编辑行为（统一规范）

编辑方式
	•	直接点击进入编辑态
	•	无保存按钮
	•	失焦即保存

编辑期间
	•	禁止状态变化
	•	禁止触发删除

⸻

7️⃣ 删除行为（统一）
	•	所有删除必须二次确认
	•	确认后不可恢复
	•	删除后刷新当前视图，不跳转日期

⸻

8️⃣ 时间切换逻辑（Day / Week 共用）

< / > 按钮
	•	<：切换到上一周（周一 → 周日）
	•	>：切换到下一周（周一 → 周日）

联动规则
	•	顶部日期实时更新
	•	日期选择条同步变化
	•	当前选中日期保持在新周范围内

⸻

9️⃣ 明确废弃的交互（禁止实现）
	•	Hover 悬浮窗
	•	长按预览卡
	•	双击行为
	•	状态 + 编辑混合点击

⸻

🔟 完成判定标准（DoD）
	•	行为与 Pencil 设计稿一致
	•	所有点击语义无冲突
	•	无隐藏状态变更
	•	无未定义交互路径

⸻

最终强调（给 Claude Code）

本文档是 最终统一规范。
不重做，不再设计，只做工程实现。
仅基于我当前在 Pencil 中选中的 Frame 修改代码。